<mat-toolbar>
  <ng-container *ngIf="isLoggedIn$ | async">
    <img
      class="user-image"
      [src]="userImage$ | async"
      referrerpolicy="no-referrer"
      alt="User Image"
    />
    <span class="username">{{ userName$ | async }}</span>
    <button
      mat-raised-button
      class="toolbar-button"
      (click)="OnLogout()"
      aria-label="Login"
    >
      Sign Out
    </button>
  </ng-container>
  <span class="spacer"></span>
  <ng-container *ngIf="(isLoggedIn$ | async) === false">
    <button
      mat-raised-button
      class="toolbar-button"
      (click)="onLogin()"
      aria-label="Login"
    >
      Login
    </button>
  </ng-container>

  <button
    mat-raised-button
    (click)="onClose()"
    class="toolbar-button"
    aria-label="Close"
  >
    Close
  </button>
</mat-toolbar>
<div class="editor-container">
  <mat-accordion>
    <!-- Editor Section -->
    <mat-expansion-panel [expanded]="true">
      <mat-expansion-panel-header>
        <mat-panel-title> <mat-icon>edit</mat-icon> Editor </mat-panel-title>
      </mat-expansion-panel-header>

      <mono-repo-markdown></mono-repo-markdown>
    </mat-expansion-panel>

    <!-- Settings Section -->
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          <mat-icon>settings</mat-icon> Global Presentation Settings
        </mat-panel-title>
      </mat-expansion-panel-header>

      <mono-repo-settings
        [theme]="(theme$ | async) || 'White'"
        [animation]="(animation$ | async) || 'None'"
        [showPen]="showPen$ | async"
        [showDrawingArea]="showDrawingArea$ | async"
        [showSlides]="showSlides$ | async"
        [showAutoSlide]="showAutoSlide$ | async"
      >
      </mono-repo-settings>
    </mat-expansion-panel>

    <!-- Publish Section -->
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          <mat-icon>publish</mat-icon> Publish
        </mat-panel-title>
      </mat-expansion-panel-header>
      <mono-repo-publish
        [name]="(name$ | async) || 'my presentation'"
        [viewUrl]="(viewUrl$ | async) || ''"
        [editUrl]="(editUrl$ | async) || ''"
        [allowEdit]="(allowEdit$ | async) || false"
        [isUserLogin]="(isLoggedIn$ | async) || false"
        [loginText]="(loginFeatureText$ | async) || ''"
        [presentations]="(userPresentations$ | async) || []"
        [selectedPresentationId]="selectedPresentationId$ | async"
      >
      </mono-repo-publish>
    </mat-expansion-panel>
  </mat-accordion>
</div>
