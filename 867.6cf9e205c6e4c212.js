"use strict";(self.webpackChunkng_demos=self.webpackChunkng_demos||[]).push([[867],{2867:(_t,ht,P)=>{P.d(ht,{a:()=>Y,b:()=>jt,c:()=>v,d:()=>zt,e:()=>Xt,f:()=>Kt,g:()=>Qt,h:()=>Ft,i:()=>D,l:()=>L,p:()=>Pt,s:()=>Dt,u:()=>y});var T=P(9671),o=P(1877),S=P(5174),et=P(9155),st=P(3956);const B={extension:(e,r,t)=>{o.l.trace("Making markers for ",t),e.append("defs").append("marker").attr("id",r+"-extensionStart").attr("class","marker extension "+r).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),e.append("defs").append("marker").attr("id",r+"-extensionEnd").attr("class","marker extension "+r).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},composition:(e,r)=>{e.append("defs").append("marker").attr("id",r+"-compositionStart").attr("class","marker composition "+r).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"-compositionEnd").attr("class","marker composition "+r).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},aggregation:(e,r)=>{e.append("defs").append("marker").attr("id",r+"-aggregationStart").attr("class","marker aggregation "+r).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"-aggregationEnd").attr("class","marker aggregation "+r).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},dependency:(e,r)=>{e.append("defs").append("marker").attr("id",r+"-dependencyStart").attr("class","marker dependency "+r).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"-dependencyEnd").attr("class","marker dependency "+r).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},lollipop:(e,r)=>{e.append("defs").append("marker").attr("id",r+"-lollipopStart").attr("class","marker lollipop "+r).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","white").attr("cx",6).attr("cy",7).attr("r",6)},point:(e,r)=>{e.append("marker").attr("id",r+"-pointEnd").attr("class","marker "+r).attr("viewBox","0 0 10 10").attr("refX",10).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"-pointStart").attr("class","marker "+r).attr("viewBox","0 0 10 10").attr("refX",0).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},circle:(e,r)=>{e.append("marker").attr("id",r+"-circleEnd").attr("class","marker "+r).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"-circleStart").attr("class","marker "+r).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},cross:(e,r)=>{e.append("marker").attr("id",r+"-crossEnd").attr("class","marker cross "+r).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"-crossStart").attr("class","marker cross "+r).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},barb:(e,r)=>{e.append("defs").append("marker").attr("id",r+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")}},Y=(e,r,t,i)=>{r.forEach(s=>{B[s](e,t,i)})},v=(e,r,t,i)=>{let s=e||"";if("object"==typeof s&&(s=s[0]),(0,o.n)((0,o.c)().flowchart.htmlLabels))return s=s.replace(/\\n|\n/g,"<br />"),o.l.info("vertexText"+s),function Z(e){const r=(0,S.Ys)(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),t=r.append("xhtml:div");return t.html('<span class="'+(e.isNode?"nodeLabel":"edgeLabel")+'" '+(e.labelStyle?'style="'+e.labelStyle+'"':"")+">"+e.label+"</span>"),function N(e,r){r&&e.attr("style",r)}(t,e.labelStyle),t.style("display","inline-block"),t.style("white-space","nowrap"),t.attr("xmlns","http://www.w3.org/1999/xhtml"),r.node()}({isNode:i,label:(0,o.L)(s).replace(/fa[blrs]?:fa-[\w-]+/g,l=>`<i class='${l.replace(":"," ")}'></i>`),labelStyle:r.replace("fill:","color:")});{const n=document.createElementNS("http://www.w3.org/2000/svg","text");n.setAttribute("style",r.replace("color:","fill:"));let a=[];a="string"==typeof s?s.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(s)?s:[];for(const l of a){const c=document.createElementNS("http://www.w3.org/2000/svg","tspan");c.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),c.setAttribute("dy","1em"),c.setAttribute("x","0"),c.setAttribute("class",t?"title-row":"row"),c.textContent=l.trim(),n.appendChild(c)}return n}},L=function(){var e=(0,T.Z)(function*(r,t,i,s){let n;const a=t.useHtmlLabels||(0,o.n)((0,o.c)().flowchart.htmlLabels);n=i||"node default";const l=r.insert("g").attr("class",n).attr("id",t.domId||t.id),c=l.insert("g").attr("class","label").attr("style",t.labelStyle);let d;d=void 0===t.labelText?"":"string"==typeof t.labelText?t.labelText:t.labelText[0];const h=c.node();let f;f="markdown"===t.labelType?(0,et.c)(c,(0,o.d)((0,o.L)(d),(0,o.c)()),{useHtmlLabels:a,width:t.width||(0,o.c)().flowchart.wrappingWidth,classes:"markdown-node-label"}):h.appendChild(v((0,o.d)((0,o.L)(d),(0,o.c)()),t.labelStyle,!1,s));let g=f.getBBox();const x=t.padding/2;if((0,o.n)((0,o.c)().flowchart.htmlLabels)){const u=f.children[0],b=(0,S.Ys)(f),_=u.getElementsByTagName("img");if(_){const R=""===d.replace(/<img[^>]*>/g,"").trim();yield Promise.all([..._].map($=>new Promise(z=>{function A(){if($.style.display="flex",$.style.flexDirection="column",R){const V=(0,o.c)().fontSize?(0,o.c)().fontSize:window.getComputedStyle(document.body).fontSize,ot=5;$.style.width=parseInt(V,10)*ot+"px"}else $.style.width="100%";z($)}setTimeout(()=>{$.complete&&A()}),$.addEventListener("error",A),$.addEventListener("load",A)})))}g=u.getBoundingClientRect(),b.attr("width",g.width),b.attr("height",g.height)}return c.attr("transform",a?"translate("+-g.width/2+", "+-g.height/2+")":"translate(0, "+-g.height/2+")"),t.centerLabel&&c.attr("transform","translate("+-g.width/2+", "+-g.height/2+")"),c.insert("rect",":first-child"),{shapeSvg:l,bbox:g,halfPadding:x,label:c}});return function(t,i,s,n){return e.apply(this,arguments)}}(),y=(e,r)=>{const t=r.node().getBBox();e.width=t.width,e.height=t.height};function M(e,r,t,i){return e.insert("polygon",":first-child").attr("points",i.map(function(s){return s.x+","+s.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-r/2+","+t/2+")")}function j(e,r,t,i){var s=e.x,n=e.y,a=s-i.x,l=n-i.y,c=Math.sqrt(r*r*l*l+t*t*a*a),d=Math.abs(r*t*a/c);i.x<s&&(d=-d);var h=Math.abs(r*t*l/c);return i.y<n&&(h=-h),{x:s+d,y:n+h}}function tt(e,r,t,i){var s,n,a,l,c,d,h,f,g,x,u,b,_;if(x=(s=r.y-e.y)*i.x+(a=e.x-r.x)*i.y+(c=r.x*e.y-e.x*r.y),!(0!==(g=s*t.x+a*t.y+c)&&0!==x&&G(g,x)||(n=i.y-t.y,l=t.x-i.x,d=i.x*t.y-t.x*i.y,h=n*e.x+l*e.y+d,f=n*r.x+l*r.y+d,0!==h&&0!==f&&G(h,f)||(u=s*l-n*a,0===u))))return b=Math.abs(u/2),{x:(_=a*d-l*c)<0?(_-b)/u:(_+b)/u,y:(_=n*c-s*d)<0?(_-b)/u:(_+b)/u}}function G(e,r){return e*r>0}const D=(e,r)=>{var c,d,t=e.x,i=e.y,s=r.x-t,n=r.y-i,a=e.width/2,l=e.height/2;return Math.abs(n)*a>Math.abs(s)*l?(n<0&&(l=-l),c=0===n?0:l*s/n,d=l):(s<0&&(a=-a),c=a,d=0===s?0:a*n/s),{x:t+c,y:i+d}},k={node:function K(e,r){return e.intersect(r)},circle:function F(e,r,t){return j(e,r,r,t)},ellipse:j,polygon:function C(e,r,t){var i=e.x,s=e.y,n=[],a=Number.POSITIVE_INFINITY,l=Number.POSITIVE_INFINITY;"function"==typeof r.forEach?r.forEach(function(u){a=Math.min(a,u.x),l=Math.min(l,u.y)}):(a=Math.min(a,r.x),l=Math.min(l,r.y));for(var c=i-e.width/2-a,d=s-e.height/2-l,h=0;h<r.length;h++){var f=r[h],g=r[h<r.length-1?h+1:0],x=tt(e,t,{x:c+f.x,y:d+f.y},{x:c+g.x,y:d+g.y});x&&n.push(x)}return n.length?(n.length>1&&n.sort(function(u,b){var _=u.x-t.x,R=u.y-t.y,$=Math.sqrt(_*_+R*R),z=b.x-t.x,A=b.y-t.y,V=Math.sqrt(z*z+A*A);return $<V?-1:$===V?0:1}),n[0]):e},rect:D},Lt=function(){var e=(0,T.Z)(function*(r,t){t.useHtmlLabels||(0,o.c)().flowchart.htmlLabels||(t.centerLabel=!0);const{shapeSvg:s,bbox:n,halfPadding:a}=yield L(r,t,"node "+t.classes,!0);o.l.info("Classes = ",t.classes);const l=s.insert("rect",":first-child");return l.attr("rx",t.rx).attr("ry",t.ry).attr("x",-n.width/2-a).attr("y",-n.height/2-a).attr("width",n.width+t.padding).attr("height",n.height+t.padding),y(t,l),t.intersect=function(c){return k.rect(t,c)},s});return function(t,i){return e.apply(this,arguments)}}(),yt=e=>e?" "+e:"",U=(e,r)=>`${r||"node default"}${yt(e.classes)} ${yt(e.class)}`,bt=function(){var e=(0,T.Z)(function*(r,t){const{shapeSvg:i,bbox:s}=yield L(r,t,U(t,void 0),!0),l=s.width+t.padding+(s.height+t.padding),c=[{x:l/2,y:0},{x:l,y:-l/2},{x:l/2,y:-l},{x:0,y:-l/2}];o.l.info("Question main (Circle)");const d=M(i,l,l,c);return d.attr("style",t.style),y(t,d),t.intersect=function(h){return o.l.warn("Intersect called"),k.polygon(t,c,h)},i});return function(t,i){return e.apply(this,arguments)}}(),Et=function(){var e=(0,T.Z)(function*(r,t){const{shapeSvg:i,bbox:s}=yield L(r,t,U(t,void 0),!0),a=s.height+t.padding,l=a/4,c=s.width+2*l+t.padding,d=[{x:l,y:0},{x:c-l,y:0},{x:c,y:-a/2},{x:c-l,y:-a},{x:l,y:-a},{x:0,y:-a/2}],h=M(i,c,a,d);return h.attr("style",t.style),y(t,h),t.intersect=function(f){return k.polygon(t,d,f)},i});return function(t,i){return e.apply(this,arguments)}}(),Bt=function(){var e=(0,T.Z)(function*(r,t){const{shapeSvg:i,bbox:s}=yield L(r,t,U(t,void 0),!0),n=s.width+t.padding,a=s.height+t.padding,l=[{x:-a/2,y:0},{x:n,y:0},{x:n,y:-a},{x:-a/2,y:-a},{x:0,y:-a/2}];return M(i,n,a,l).attr("style",t.style),t.width=n+a,t.height=a,t.intersect=function(d){return k.polygon(t,l,d)},i});return function(t,i){return e.apply(this,arguments)}}(),Mt=function(){var e=(0,T.Z)(function*(r,t){const{shapeSvg:i,bbox:s}=yield L(r,t,U(t),!0),n=s.width+t.padding,a=s.height+t.padding,l=[{x:-2*a/6,y:0},{x:n-a/6,y:0},{x:n+2*a/6,y:-a},{x:a/6,y:-a}],c=M(i,n,a,l);return c.attr("style",t.style),y(t,c),t.intersect=function(d){return k.polygon(t,l,d)},i});return function(t,i){return e.apply(this,arguments)}}(),Ct=function(){var e=(0,T.Z)(function*(r,t){const{shapeSvg:i,bbox:s}=yield L(r,t,U(t,void 0),!0),n=s.width+t.padding,a=s.height+t.padding,l=[{x:2*a/6,y:0},{x:n+a/6,y:0},{x:n-2*a/6,y:-a},{x:-a/6,y:-a}],c=M(i,n,a,l);return c.attr("style",t.style),y(t,c),t.intersect=function(d){return k.polygon(t,l,d)},i});return function(t,i){return e.apply(this,arguments)}}(),Tt=function(){var e=(0,T.Z)(function*(r,t){const{shapeSvg:i,bbox:s}=yield L(r,t,U(t,void 0),!0),n=s.width+t.padding,a=s.height+t.padding,l=[{x:-2*a/6,y:0},{x:n+2*a/6,y:0},{x:n-a/6,y:-a},{x:a/6,y:-a}],c=M(i,n,a,l);return c.attr("style",t.style),y(t,c),t.intersect=function(d){return k.polygon(t,l,d)},i});return function(t,i){return e.apply(this,arguments)}}(),It=function(){var e=(0,T.Z)(function*(r,t){const{shapeSvg:i,bbox:s}=yield L(r,t,U(t,void 0),!0),n=s.width+t.padding,a=s.height+t.padding,l=[{x:a/6,y:0},{x:n-a/6,y:0},{x:n+2*a/6,y:-a},{x:-2*a/6,y:-a}],c=M(i,n,a,l);return c.attr("style",t.style),y(t,c),t.intersect=function(d){return k.polygon(t,l,d)},i});return function(t,i){return e.apply(this,arguments)}}(),Rt=function(){var e=(0,T.Z)(function*(r,t){const{shapeSvg:i,bbox:s}=yield L(r,t,U(t,void 0),!0),n=s.width+t.padding,a=s.height+t.padding,l=[{x:0,y:0},{x:n+a/2,y:0},{x:n,y:-a/2},{x:n+a/2,y:-a},{x:0,y:-a}],c=M(i,n,a,l);return c.attr("style",t.style),y(t,c),t.intersect=function(d){return k.polygon(t,l,d)},i});return function(t,i){return e.apply(this,arguments)}}(),Nt=function(){var e=(0,T.Z)(function*(r,t){const{shapeSvg:i,bbox:s}=yield L(r,t,U(t,void 0),!0),n=s.width+t.padding,a=n/2,l=a/(2.5+n/50),c=s.height+l+t.padding,d="M 0,"+l+" a "+a+","+l+" 0,0,0 "+n+" 0 a "+a+","+l+" 0,0,0 "+-n+" 0 l 0,"+c+" a "+a+","+l+" 0,0,0 "+n+" 0 l 0,"+-c,h=i.attr("label-offset-y",l).insert("path",":first-child").attr("style",t.style).attr("d",d).attr("transform","translate("+-n/2+","+-(c/2+l)+")");return y(t,h),t.intersect=function(f){const g=k.rect(t,f),x=g.x-t.x;if(0!=a&&(Math.abs(x)<t.width/2||Math.abs(x)==t.width/2&&Math.abs(g.y-t.y)>t.height/2-l)){let u=l*l*(1-x*x/(a*a));0!=u&&(u=Math.sqrt(u)),u=l-u,f.y-t.y>0&&(u=-u),g.y+=u}return g},i});return function(t,i){return e.apply(this,arguments)}}(),Ht=function(){var e=(0,T.Z)(function*(r,t){const{shapeSvg:i,bbox:s,halfPadding:n}=yield L(r,t,"node "+t.classes+" "+t.class,!0),a=i.insert("rect",":first-child"),l=s.width+t.padding,c=s.height+t.padding;if(a.attr("class","basic label-container").attr("style",t.style).attr("rx",t.rx).attr("ry",t.ry).attr("x",-s.width/2-n).attr("y",-s.height/2-n).attr("width",l).attr("height",c),t.props){const d=new Set(Object.keys(t.props));t.props.borders&&(wt(a,t.props.borders,l,c),d.delete("borders")),d.forEach(h=>{o.l.warn(`Unknown node property ${h}`)})}return y(t,a),t.intersect=function(d){return k.rect(t,d)},i});return function(t,i){return e.apply(this,arguments)}}(),Ot=function(){var e=(0,T.Z)(function*(r,t){const{shapeSvg:i}=yield L(r,t,"label",!0);o.l.trace("Classes = ",t.class);const s=i.insert("rect",":first-child");if(s.attr("width",0).attr("height",0),i.attr("class","label edgeLabel"),t.props){const l=new Set(Object.keys(t.props));t.props.borders&&(wt(s,t.props.borders,0,0),l.delete("borders")),l.forEach(c=>{o.l.warn(`Unknown node property ${c}`)})}return y(t,s),t.intersect=function(l){return k.rect(t,l)},i});return function(t,i){return e.apply(this,arguments)}}();function wt(e,r,t,i){const s=[],n=l=>{s.push(l,0)},a=l=>{s.push(0,l)};r.includes("t")?(o.l.debug("add top border"),n(t)):a(t),r.includes("r")?(o.l.debug("add right border"),n(i)):a(i),r.includes("b")?(o.l.debug("add bottom border"),n(t)):a(t),r.includes("l")?(o.l.debug("add left border"),n(i)):a(i),e.attr("stroke-dasharray",s.join(" "))}const $t=function(){var e=(0,T.Z)(function*(r,t){const{shapeSvg:i,bbox:s}=yield L(r,t,U(t,void 0),!0),n=s.height+t.padding,a=s.width+n/4+t.padding,l=i.insert("rect",":first-child").attr("style",t.style).attr("rx",n/2).attr("ry",n/2).attr("x",-a/2).attr("y",-n/2).attr("width",a).attr("height",n);return y(t,l),t.intersect=function(c){return k.rect(t,c)},i});return function(t,i){return e.apply(this,arguments)}}(),mt=(e,r,t)=>{const i=e.insert("g").attr("class","node default").attr("id",r.domId||r.id);let s=70,n=10;"LR"===t&&(s=10,n=70);const a=i.append("rect").attr("x",-1*s/2).attr("y",-1*n/2).attr("width",s).attr("height",n).attr("class","fork-join");return y(r,a),r.height=r.height+r.padding/2,r.width=r.width+r.padding/2,r.intersect=function(l){return k.rect(r,l)},i},kt={rhombus:bt,question:bt,rect:Ht,labelRect:Ot,rectWithTitle:(e,r)=>{let t;t=r.classes?"node "+r.classes:"node default";const i=e.insert("g").attr("class",t).attr("id",r.domId||r.id),s=i.insert("rect",":first-child"),n=i.insert("line"),a=i.insert("g").attr("class","label"),l=r.labelText.flat?r.labelText.flat():r.labelText;let c="";c="object"==typeof l?l[0]:l,o.l.info("Label text abc79",c,l,"object"==typeof l);const d=a.node().appendChild(v(c,r.labelStyle,!0,!0));let h={width:0,height:0};if((0,o.n)((0,o.c)().flowchart.htmlLabels)){const b=d.children[0],_=(0,S.Ys)(d);h=b.getBoundingClientRect(),_.attr("width",h.width),_.attr("height",h.height)}o.l.info("Text 2",l);const f=l.slice(1,l.length);let g=d.getBBox();const x=a.node().appendChild(v(f.join?f.join("<br/>"):f,r.labelStyle,!0,!0));if((0,o.n)((0,o.c)().flowchart.htmlLabels)){const b=x.children[0],_=(0,S.Ys)(x);h=b.getBoundingClientRect(),_.attr("width",h.width),_.attr("height",h.height)}const u=r.padding/2;return(0,S.Ys)(x).attr("transform","translate( "+(h.width>g.width?0:(g.width-h.width)/2)+", "+(g.height+u+5)+")"),(0,S.Ys)(d).attr("transform","translate( "+(h.width<g.width?0:-(g.width-h.width)/2)+", 0)"),h=a.node().getBBox(),a.attr("transform","translate("+-h.width/2+", "+(-h.height/2-u+3)+")"),s.attr("class","outer title-state").attr("x",-h.width/2-u).attr("y",-h.height/2-u).attr("width",h.width+r.padding).attr("height",h.height+r.padding),n.attr("class","divider").attr("x1",-h.width/2-u).attr("x2",h.width/2+u).attr("y1",-h.height/2-u+g.height+u).attr("y2",-h.height/2-u+g.height+u),y(r,s),r.intersect=function(b){return k.rect(r,b)},i},choice:(e,r)=>{const t=e.insert("g").attr("class","node default").attr("id",r.domId||r.id);return t.insert("polygon",":first-child").attr("points",[{x:0,y:14},{x:14,y:0},{x:0,y:-14},{x:-14,y:0}].map(function(a){return a.x+","+a.y}).join(" ")).attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),r.width=28,r.height=28,r.intersect=function(a){return k.circle(r,14,a)},t},circle:function(){var e=(0,T.Z)(function*(r,t){const{shapeSvg:i,bbox:s,halfPadding:n}=yield L(r,t,U(t,void 0),!0),a=i.insert("circle",":first-child");return a.attr("style",t.style).attr("rx",t.rx).attr("ry",t.ry).attr("r",s.width/2+n).attr("width",s.width+t.padding).attr("height",s.height+t.padding),o.l.info("Circle main"),y(t,a),t.intersect=function(l){return o.l.info("Circle intersect",t,s.width/2+n,l),k.circle(t,s.width/2+n,l)},i});return function(t,i){return e.apply(this,arguments)}}(),doublecircle:function(){var e=(0,T.Z)(function*(r,t){const{shapeSvg:i,bbox:s,halfPadding:n}=yield L(r,t,U(t,void 0),!0),l=i.insert("g",":first-child"),c=l.insert("circle"),d=l.insert("circle");return l.attr("class",t.class),c.attr("style",t.style).attr("rx",t.rx).attr("ry",t.ry).attr("r",s.width/2+n+5).attr("width",s.width+t.padding+10).attr("height",s.height+t.padding+10),d.attr("style",t.style).attr("rx",t.rx).attr("ry",t.ry).attr("r",s.width/2+n).attr("width",s.width+t.padding).attr("height",s.height+t.padding),o.l.info("DoubleCircle main"),y(t,c),t.intersect=function(h){return o.l.info("DoubleCircle intersect",t,s.width/2+n+5,h),k.circle(t,s.width/2+n+5,h)},i});return function(t,i){return e.apply(this,arguments)}}(),stadium:$t,hexagon:Et,rect_left_inv_arrow:Bt,lean_right:Mt,lean_left:Ct,trapezoid:Tt,inv_trapezoid:It,rect_right_inv_arrow:Rt,cylinder:Nt,start:(e,r)=>{const t=e.insert("g").attr("class","node default").attr("id",r.domId||r.id),i=t.insert("circle",":first-child");return i.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),y(r,i),r.intersect=function(s){return k.circle(r,7,s)},t},end:(e,r)=>{const t=e.insert("g").attr("class","node default").attr("id",r.domId||r.id),i=t.insert("circle",":first-child"),s=t.insert("circle",":first-child");return s.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),i.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),y(r,s),r.intersect=function(n){return k.circle(r,7,n)},t},note:Lt,subroutine:function(){var e=(0,T.Z)(function*(r,t){const{shapeSvg:i,bbox:s}=yield L(r,t,U(t,void 0),!0),n=s.width+t.padding,a=s.height+t.padding,l=[{x:0,y:0},{x:n,y:0},{x:n,y:-a},{x:0,y:-a},{x:0,y:0},{x:-8,y:0},{x:n+8,y:0},{x:n+8,y:-a},{x:-8,y:-a},{x:-8,y:0}],c=M(i,n,a,l);return c.attr("style",t.style),y(t,c),t.intersect=function(d){return k.polygon(t,l,d)},i});return function(t,i){return e.apply(this,arguments)}}(),fork:mt,join:mt,class_box:(e,r)=>{const t=r.padding/2;let n;n=r.classes?"node "+r.classes:"node default";const a=e.insert("g").attr("class",n).attr("id",r.domId||r.id),l=a.insert("rect",":first-child"),c=a.insert("line"),d=a.insert("line");let h=0,f=4;const g=a.insert("g").attr("class","label");let x=0;const u=r.classData.annotations&&r.classData.annotations[0],b=r.classData.annotations[0]?"\xab"+r.classData.annotations[0]+"\xbb":"",_=g.node().appendChild(v(b,r.labelStyle,!0,!0));let R=_.getBBox();if((0,o.n)((0,o.c)().flowchart.htmlLabels)){const H=_.children[0],O=(0,S.Ys)(_);R=H.getBoundingClientRect(),O.attr("width",R.width),O.attr("height",R.height)}r.classData.annotations[0]&&(f+=R.height+4,h+=R.width);let $=r.classData.label;void 0!==r.classData.type&&""!==r.classData.type&&((0,o.c)().flowchart.htmlLabels?$+="&lt;"+r.classData.type+"&gt;":$+="<"+r.classData.type+">");const z=g.node().appendChild(v($,r.labelStyle,!0,!0));(0,S.Ys)(z).attr("class","classTitle");let A=z.getBBox();if((0,o.n)((0,o.c)().flowchart.htmlLabels)){const H=z.children[0],O=(0,S.Ys)(z);A=H.getBoundingClientRect(),O.attr("width",A.width),O.attr("height",A.height)}f+=A.height+4,A.width>h&&(h=A.width);const V=[];r.classData.members.forEach(H=>{const O=(0,st.p)(H);let q=O.displayText;(0,o.c)().flowchart.htmlLabels&&(q=q.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const J=g.node().appendChild(v(q,O.cssStyle?O.cssStyle:r.labelStyle,!0,!0));let X=J.getBBox();if((0,o.n)((0,o.c)().flowchart.htmlLabels)){const ft=J.children[0],at=(0,S.Ys)(J);X=ft.getBoundingClientRect(),at.attr("width",X.width),at.attr("height",X.height)}X.width>h&&(h=X.width),f+=X.height+4,V.push(J)}),f+=8;const ot=[];if(r.classData.methods.forEach(H=>{const O=(0,st.p)(H);let q=O.displayText;(0,o.c)().flowchart.htmlLabels&&(q=q.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const J=g.node().appendChild(v(q,O.cssStyle?O.cssStyle:r.labelStyle,!0,!0));let X=J.getBBox();if((0,o.n)((0,o.c)().flowchart.htmlLabels)){const ft=J.children[0],at=(0,S.Ys)(J);X=ft.getBoundingClientRect(),at.attr("width",X.width),at.attr("height",X.height)}X.width>h&&(h=X.width),f+=X.height+4,ot.push(J)}),f+=8,u){let H=(h-R.width)/2;(0,S.Ys)(_).attr("transform","translate( "+(-1*h/2+H)+", "+-1*f/2+")"),x=R.height+4}let Vt=(h-A.width)/2;return(0,S.Ys)(z).attr("transform","translate( "+(-1*h/2+Vt)+", "+(-1*f/2+x)+")"),x+=A.height+4,c.attr("class","divider").attr("x1",-h/2-t).attr("x2",h/2+t).attr("y1",-f/2-t+8+x).attr("y2",-f/2-t+8+x),x+=8,V.forEach(H=>{(0,S.Ys)(H).attr("transform","translate( "+-h/2+", "+(-1*f/2+x+4)+")");const O=H?.getBBox();x+=(O?.height??0)+4}),x+=8,d.attr("class","divider").attr("x1",-h/2-t).attr("x2",h/2+t).attr("y1",-f/2-t+8+x).attr("y2",-f/2-t+8+x),x+=8,ot.forEach(H=>{(0,S.Ys)(H).attr("transform","translate( "+-h/2+", "+(-1*f/2+x)+")");const O=H?.getBBox();x+=(O?.height??0)+4}),l.attr("class","outer title-state").attr("x",-h/2-t).attr("y",-f/2-t).attr("width",h+r.padding).attr("height",f+r.padding),y(r,l),r.intersect=function(H){return k.rect(r,H)},a}};let rt={};const Xt=function(){var e=(0,T.Z)(function*(r,t,i){let s,n;if(t.link){let a;"sandbox"===(0,o.c)().securityLevel?a="_top":t.linkTarget&&(a=t.linkTarget||"_blank"),s=r.insert("svg:a").attr("xlink:href",t.link).attr("target",a),n=yield kt[t.shape](s,t,i)}else n=yield kt[t.shape](r,t,i),s=n;return t.tooltip&&n.attr("title",t.tooltip),t.class&&n.attr("class","node default "+t.class),rt[t.id]=s,t.haveCallback&&rt[t.id].attr("class",rt[t.id].attr("class")+" clickable"),s});return function(t,i,s){return e.apply(this,arguments)}}(),Dt=(e,r)=>{rt[r.id]=e},jt=()=>{rt={}},Pt=e=>{const r=rt[e.id];o.l.trace("Transforming node",e.diff,e,"translate("+(e.x-e.width/2-5)+", "+e.width/2+")");const i=e.diff||0;return r.attr("transform",e.clusterNode?"translate("+(e.x+i-e.width/2)+", "+(e.y-e.height/2-8)+")":"translate("+e.x+", "+e.y+")"),i};let lt={},W={};const zt=()=>{lt={},W={}},Kt=(e,r)=>{const t=(0,o.n)((0,o.c)().flowchart.htmlLabels),i="markdown"===r.labelType?(0,et.c)(e,r.label,{style:r.labelStyle,useHtmlLabels:t,addSvgBackground:!0}):v(r.label,r.labelStyle);o.l.info("abc82",r,r.labelType);const s=e.insert("g").attr("class","edgeLabel"),n=s.insert("g").attr("class","label");n.node().appendChild(i);let l,a=i.getBBox();if(t){const c=i.children[0],d=(0,S.Ys)(i);a=c.getBoundingClientRect(),d.attr("width",a.width),d.attr("height",a.height)}if(n.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),lt[r.id]=s,r.width=a.width,r.height=a.height,r.startLabelLeft){const c=v(r.startLabelLeft,r.labelStyle),d=e.insert("g").attr("class","edgeTerminals"),h=d.insert("g").attr("class","inner");l=h.node().appendChild(c);const f=c.getBBox();h.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),W[r.id]||(W[r.id]={}),W[r.id].startLeft=d,ct(l,r.startLabelLeft)}if(r.startLabelRight){const c=v(r.startLabelRight,r.labelStyle),d=e.insert("g").attr("class","edgeTerminals"),h=d.insert("g").attr("class","inner");l=d.node().appendChild(c),h.node().appendChild(c);const f=c.getBBox();h.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),W[r.id]||(W[r.id]={}),W[r.id].startRight=d,ct(l,r.startLabelRight)}if(r.endLabelLeft){const c=v(r.endLabelLeft,r.labelStyle),d=e.insert("g").attr("class","edgeTerminals"),h=d.insert("g").attr("class","inner");l=h.node().appendChild(c);const f=c.getBBox();h.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),d.node().appendChild(c),W[r.id]||(W[r.id]={}),W[r.id].endLeft=d,ct(l,r.endLabelLeft)}if(r.endLabelRight){const c=v(r.endLabelRight,r.labelStyle),d=e.insert("g").attr("class","edgeTerminals"),h=d.insert("g").attr("class","inner");l=h.node().appendChild(c);const f=c.getBBox();h.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),d.node().appendChild(c),W[r.id]||(W[r.id]={}),W[r.id].endRight=d,ct(l,r.endLabelRight)}return i};function ct(e,r){(0,o.c)().flowchart.htmlLabels&&e&&(e.style.width=9*r.length+"px",e.style.height="12px")}const Ft=(e,r)=>{o.l.info("Moving label abc78 ",e.id,e.label,lt[e.id]);let t=r.updatedPath?r.updatedPath:r.originalPath;if(e.label){const i=lt[e.id];let s=e.x,n=e.y;if(t){const a=o.u.calcLabelPosition(t);o.l.info("Moving label "+e.label+" from (",s,",",n,") to (",a.x,",",a.y,") abc78"),r.updatedPath&&(s=a.x,n=a.y)}i.attr("transform","translate("+s+", "+n+")")}if(e.startLabelLeft){const i=W[e.id].startLeft;let s=e.x,n=e.y;if(t){const a=o.u.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_left",t);s=a.x,n=a.y}i.attr("transform","translate("+s+", "+n+")")}if(e.startLabelRight){const i=W[e.id].startRight;let s=e.x,n=e.y;if(t){const a=o.u.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_right",t);s=a.x,n=a.y}i.attr("transform","translate("+s+", "+n+")")}if(e.endLabelLeft){const i=W[e.id].endLeft;let s=e.x,n=e.y;if(t){const a=o.u.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_left",t);s=a.x,n=a.y}i.attr("transform","translate("+s+", "+n+")")}if(e.endLabelRight){const i=W[e.id].endRight;let s=e.x,n=e.y;if(t){const a=o.u.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_right",t);s=a.x,n=a.y}i.attr("transform","translate("+s+", "+n+")")}},vt=(e,r)=>{o.l.warn("abc88 cutPathAtIntersect",e,r);let t=[],i=e[0],s=!1;return e.forEach(n=>{if(o.l.info("abc88 checking point",n,r),((e,r)=>{const i=e.y,s=Math.abs(r.x-e.x),n=Math.abs(r.y-i);return s>=e.width/2||n>=e.height/2})(r,n)||s)o.l.warn("abc88 outside",n,i),i=n,s||t.push(n);else{const a=((e,r,t)=>{o.l.warn(`intersection calc abc89:\n  outsidePoint: ${JSON.stringify(r)}\n  insidePoint : ${JSON.stringify(t)}\n  node        : x:${e.x} y:${e.y} w:${e.width} h:${e.height}`);const i=e.x,s=e.y,n=Math.abs(i-t.x),a=e.width/2;let l=t.x<r.x?a-n:a+n;const c=e.height/2,d=Math.abs(r.y-t.y),h=Math.abs(r.x-t.x);if(Math.abs(s-r.y)*a>Math.abs(i-r.x)*c){let f=t.y<r.y?r.y-c-s:s-c-r.y;l=h*f/d;const g={x:t.x<r.x?t.x+l:t.x-h+l,y:t.y<r.y?t.y+d-f:t.y-d+f};return 0===l&&(g.x=r.x,g.y=r.y),0===h&&(g.x=r.x),0===d&&(g.y=r.y),o.l.warn(`abc89 topp/bott calc, Q ${d}, q ${f}, R ${h}, r ${l}`,g),g}{l=t.x<r.x?r.x-a-i:i-a-r.x;let f=d*l/h,g=t.x<r.x?t.x+h-l:t.x-h+l,x=t.y<r.y?t.y+f:t.y-f;return o.l.warn(`sides calc abc89, Q ${d}, q ${f}, R ${h}, r ${l}`,{_x:g,_y:x}),0===l&&(g=r.x,x=r.y),0===h&&(g=r.x),0===d&&(x=r.y),{x:g,y:x}}})(r,i,n);o.l.warn("abc88 inside",n,i,a),o.l.warn("abc88 intersection",a);let l=!1;t.forEach(c=>{l=l||c.x===a.x&&c.y===a.y}),t.some(c=>c.x===a.x&&c.y===a.y)?o.l.warn("abc88 no intersect",a,t):t.push(a),s=!0}}),o.l.warn("abc88 returning points",t),t},Qt=function(e,r,t,i,s,n){let a=t.points,l=!1;const c=n.node(r.v);var d=n.node(r.w);o.l.info("abc88 InsertEdge: ",t),d.intersect&&c.intersect&&(a=a.slice(1,t.points.length-1),a.unshift(c.intersect(a[0])),o.l.info("Last point",a[a.length-1],d,d.intersect(a[a.length-1])),a.push(d.intersect(a[a.length-1]))),t.toCluster&&(o.l.info("to cluster abc88",i[t.toCluster]),a=vt(t.points,i[t.toCluster].node),l=!0),t.fromCluster&&(o.l.info("from cluster abc88",i[t.fromCluster]),a=vt(a.reverse(),i[t.fromCluster].node).reverse(),l=!0);const h=a.filter(R=>!Number.isNaN(R.y));let f;f=("graph"===s||"flowchart"===s)&&t.curve||S.$0Z;const g=(0,S.jvg)().x(function(R){return R.x}).y(function(R){return R.y}).curve(f);let x;switch(t.thickness){case"normal":x="edge-thickness-normal";break;case"thick":case"invisible":x="edge-thickness-thick";break;default:x=""}switch(t.pattern){case"solid":x+=" edge-pattern-solid";break;case"dotted":x+=" edge-pattern-dotted";break;case"dashed":x+=" edge-pattern-dashed"}const u=e.append("path").attr("d",g(h)).attr("id",t.id).attr("class"," "+x+(t.classes?" "+t.classes:"")).attr("style",t.style);let b="";switch(((0,o.c)().flowchart.arrowMarkerAbsolute||(0,o.c)().state.arrowMarkerAbsolute)&&(b=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,b=b.replace(/\(/g,"\\("),b=b.replace(/\)/g,"\\)")),o.l.info("arrowTypeStart",t.arrowTypeStart),o.l.info("arrowTypeEnd",t.arrowTypeEnd),t.arrowTypeStart){case"arrow_cross":u.attr("marker-start","url("+b+"#"+s+"-crossStart)");break;case"arrow_point":u.attr("marker-start","url("+b+"#"+s+"-pointStart)");break;case"arrow_barb":u.attr("marker-start","url("+b+"#"+s+"-barbStart)");break;case"arrow_circle":u.attr("marker-start","url("+b+"#"+s+"-circleStart)");break;case"aggregation":u.attr("marker-start","url("+b+"#"+s+"-aggregationStart)");break;case"extension":u.attr("marker-start","url("+b+"#"+s+"-extensionStart)");break;case"composition":u.attr("marker-start","url("+b+"#"+s+"-compositionStart)");break;case"dependency":u.attr("marker-start","url("+b+"#"+s+"-dependencyStart)");break;case"lollipop":u.attr("marker-start","url("+b+"#"+s+"-lollipopStart)")}switch(t.arrowTypeEnd){case"arrow_cross":u.attr("marker-end","url("+b+"#"+s+"-crossEnd)");break;case"arrow_point":u.attr("marker-end","url("+b+"#"+s+"-pointEnd)");break;case"arrow_barb":u.attr("marker-end","url("+b+"#"+s+"-barbEnd)");break;case"arrow_circle":u.attr("marker-end","url("+b+"#"+s+"-circleEnd)");break;case"aggregation":u.attr("marker-end","url("+b+"#"+s+"-aggregationEnd)");break;case"extension":u.attr("marker-end","url("+b+"#"+s+"-extensionEnd)");break;case"composition":u.attr("marker-end","url("+b+"#"+s+"-compositionEnd)");break;case"dependency":u.attr("marker-end","url("+b+"#"+s+"-dependencyEnd)");break;case"lollipop":u.attr("marker-end","url("+b+"#"+s+"-lollipopEnd)")}let _={};return l&&(_.updatedPath=a),_.originalPath=t.points,_}},3956:(_t,ht,P)=>{P.d(ht,{p:()=>nt,s:()=>gt});var T=P(5174),o=P(1877);let S=0;const it=function(m){let w=m.id;return m.type&&(w+="<"+m.type+">"),w},nt=function(m){let w="",p="",E="",B="",Y=m.substring(0,1),N=m.substring(m.length-1,m.length);Y.match(/[#+~-]/)&&(B=Y);let Z=/[\s\w)~]/;N.match(Z)||(p=pt(N));const L=(m=m.substring(""===B?0:1,""===p?m.length:m.length-1)).indexOf("("),y=m.indexOf(")");if(L>1&&y>L&&y<=m.length){let K=m.substring(0,L).trim();const j=m.substring(L+1,y);if(w=B+K+"("+(0,o.x)(j.trim())+")",y<m.length){let F=m.substring(y+1,y+2);""!==p||F.match(Z)?E=m.substring(y+1).trim():(p=pt(F),E=m.substring(y+2).trim()),""!==E&&(":"===E.charAt(0)&&(E=E.substring(1).trim()),E=" : "+(0,o.x)(E),w+=E)}}else w=B+(0,o.x)(m);return{displayText:w,cssStyle:p}},dt=function(m,w,p,E){let B=nt(w);const Y=m.append("tspan").attr("x",E.padding).text(B.displayText);""!==B.cssStyle&&Y.attr("style",B.cssStyle),p||Y.attr("dy",E.textHeight)},pt=function(m){switch(m){case"*":return"font-style:italic;";case"$":return"text-decoration:underline;";default:return""}},gt={getClassTitleString:it,drawClass:function(m,w,p,E){o.l.debug("Rendering class ",w,p);const B=w.id,Y={id:B,label:w.id,width:0,height:0},N=m.append("g").attr("id",E.db.lookUpDomId(B)).attr("class","classGroup");let Z;Z=w.link?N.append("svg:a").attr("xlink:href",w.link).attr("target",w.linkTarget).append("text").attr("y",p.textHeight+p.padding).attr("x",0):N.append("text").attr("y",p.textHeight+p.padding).attr("x",0);let I=!0;w.annotations.forEach(function(k){const xt=Z.append("tspan").text("\xab"+k+"\xbb");I||xt.attr("dy",p.textHeight),I=!1});let v=it(w);const L=Z.append("tspan").text(v).attr("class","title");I||L.attr("dy",p.textHeight);const y=Z.node().getBBox().height,M=N.append("line").attr("x1",0).attr("y1",p.padding+y+p.dividerMargin/2).attr("y2",p.padding+y+p.dividerMargin/2),K=N.append("text").attr("x",p.padding).attr("y",y+p.dividerMargin+p.textHeight).attr("fill","white").attr("class","classText");I=!0,w.members.forEach(function(k){dt(K,k,I,p),I=!1});const j=K.node().getBBox(),F=N.append("line").attr("x1",0).attr("y1",p.padding+y+p.dividerMargin+j.height).attr("y2",p.padding+y+p.dividerMargin+j.height),tt=N.append("text").attr("x",p.padding).attr("y",y+2*p.dividerMargin+j.height+p.textHeight).attr("fill","white").attr("class","classText");I=!0,w.methods.forEach(function(k){dt(tt,k,I,p),I=!1});const G=N.node().getBBox();var C=" ";w.cssClasses.length>0&&(C+=w.cssClasses.join(" "));const D=N.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",G.width+2*p.padding).attr("height",G.height+p.padding+.5*p.dividerMargin).attr("class",C).node().getBBox().width;return Z.node().childNodes.forEach(function(k){k.setAttribute("x",(D-k.getBBox().width)/2)}),w.tooltip&&Z.insert("title").text(w.tooltip),M.attr("x2",D),F.attr("x2",D),Y.width=D,Y.height=G.height+p.padding+.5*p.dividerMargin,Y},drawEdge:function(m,w,p,E,B){const Y=function(C){switch(C){case B.db.relationType.AGGREGATION:return"aggregation";case B.db.relationType.EXTENSION:return"extension";case B.db.relationType.COMPOSITION:return"composition";case B.db.relationType.DEPENDENCY:return"dependency";case B.db.relationType.LOLLIPOP:return"lollipop"}};w.points=w.points.filter(C=>!Number.isNaN(C.y));const N=w.points,Z=(0,T.jvg)().x(function(C){return C.x}).y(function(C){return C.y}).curve(T.$0Z),I=m.append("path").attr("d",Z(N)).attr("id","edge"+S).attr("class","relation");let L,y,v="";E.arrowMarkerAbsolute&&(v=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,v=v.replace(/\(/g,"\\("),v=v.replace(/\)/g,"\\)")),1==p.relation.lineType&&I.attr("class","relation dashed-line"),10==p.relation.lineType&&I.attr("class","relation dotted-line"),"none"!==p.relation.type1&&I.attr("marker-start","url("+v+"#"+Y(p.relation.type1)+"Start)"),"none"!==p.relation.type2&&I.attr("marker-end","url("+v+"#"+Y(p.relation.type2)+"End)");const M=w.points.length;let j,F,tt,G,K=o.u.calcLabelPosition(w.points);if(L=K.x,y=K.y,M%2!=0&&M>1){let C=o.u.calcCardinalityPosition("none"!==p.relation.type1,w.points,w.points[0]),Q=o.u.calcCardinalityPosition("none"!==p.relation.type2,w.points,w.points[M-1]);o.l.debug("cardinality_1_point "+JSON.stringify(C)),o.l.debug("cardinality_2_point "+JSON.stringify(Q)),j=C.x,F=C.y,tt=Q.x,G=Q.y}if(void 0!==p.title){const C=m.append("g").attr("class","classLabel"),Q=C.append("text").attr("class","label").attr("x",L).attr("y",y).attr("fill","red").attr("text-anchor","middle").text(p.title);window.label=Q;const D=Q.node().getBBox();C.insert("rect",":first-child").attr("class","box").attr("x",D.x-E.padding/2).attr("y",D.y-E.padding/2).attr("width",D.width+E.padding).attr("height",D.height+E.padding)}o.l.info("Rendering relation "+JSON.stringify(p)),void 0!==p.relationTitle1&&"none"!==p.relationTitle1&&m.append("g").attr("class","cardinality").append("text").attr("class","type1").attr("x",j).attr("y",F).attr("fill","black").attr("font-size","6").text(p.relationTitle1),void 0!==p.relationTitle2&&"none"!==p.relationTitle2&&m.append("g").attr("class","cardinality").append("text").attr("class","type2").attr("x",tt).attr("y",G).attr("fill","black").attr("font-size","6").text(p.relationTitle2),S++},drawNote:function(m,w,p,E){o.l.debug("Rendering note ",w,p);const B=w.id,Y={id:B,text:w.text,width:0,height:0},N=m.append("g").attr("id",B).attr("class","classGroup");let Z=N.append("text").attr("y",p.textHeight+p.padding).attr("x",0);const I=JSON.parse(`"${w.text}"`).split("\n");I.forEach(function(M){o.l.debug(`Adding line: ${M}`),Z.append("tspan").text(M).attr("class","title").attr("dy",p.textHeight)});const v=N.node().getBBox(),y=N.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",v.width+2*p.padding).attr("height",v.height+I.length*p.textHeight+p.padding+.5*p.dividerMargin).node().getBBox().width;return Z.node().childNodes.forEach(function(M){M.setAttribute("x",(y-M.getBBox().width)/2)}),Y.width=y,Y.height=v.height+I.length*p.textHeight+p.padding+.5*p.dividerMargin,Y},parseMember:nt}}}]);